<head>
    <title>Rate This Spot</title>
    <style>
      /* Basic styling for body and overall layout */
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #f9f9f9;
      }
  
      /* Header styling */
      header {
        background: #3b7b7a;
        color: white;
        padding: 1rem;
        text-align: center;
      }
  
      /* Button styling inside the header */
      header button {
        margin: 0.5rem;
        padding: 0.5rem 1rem;
        background: #555;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
  
      /* Main content area */
      main {
        padding: 1rem;
      }
  
      /* Grid-like layout for list of spots */
      .spot-list {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
      }
  
      /* Individual card for a saved spot */
      .spot-card {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        width: calc(50% - 1rem);
        padding: 1rem;
        cursor: pointer;
      }
  
      .spot-card img {
        width: 100%;
        height: 100px;
        object-fit: cover;
        border-radius: 4px;
      }
  
      /* Modal popup styling */
      .modal {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
      }
  
      .modal-content {
        background: white;
        padding: 2rem;
        border-radius: 8px;
        max-width: 400px;
        width: 100%;
      }
  
      /* Form input styling */
      form input, form textarea, form button {
        display: block;
        width: 100%;
        margin-bottom: 1rem;
        padding: 0.5rem;
      }
  
      textarea {
        resize: vertical;
        min-height: 80px;
        max-height: 300px;
      }
  
      /* Make spot cards full width on small screens */
      @media (max-width: 600px) {
        .spot-card {
          width: 100%;
        }
      }

      .spot-card button {
        padding: 0.4rem 0.8rem;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        color: white;
        background-color: #d9534f; /* Bootstrap's danger red */
        }

    </style>
  </head>
  <body>
    <!-- Header Section -->
    <header>
      <h1>Rate This Spot</h1>
      <button onclick="openForm()">Add New Spot</button>
    </header>
  
    <!-- Main Section Where Saved Spots Appear -->
    <main>
      <div class="spot-list" id="spotList"></div>
    </main>
  
    <!-- Modal for Viewing Full Review -->
    <div class="modal" id="spotModal">
      <div class="modal-content" id="modalContent"></div>
    </div>
  
    <!-- Modal for Adding New Spot -->
    <div class="modal" id="formModal">
      <div class="modal-content">
        <h2>Add New Spot</h2>
        <form id="spotForm">
          <input type="text" id="name" placeholder="Location Name" required />
          <input type="file" id="image" accept="image/*" required />
          <input type="number" id="rating" placeholder="Rating (1-5)" min="1" max="5" required />
          <textarea id="review" placeholder="Write your review (max 500 characters)" maxlength="500" required></textarea>
          <button type="submit">Save Spot</button>
          <button type="button" onclick="closeForm()">Cancel</button>
        </form>
      </div>
    </div>
  
    <script>
      // Get references to necessary elements
      const spotList = document.getElementById("spotList");
      const spotModal = document.getElementById("spotModal");
      const modalContent = document.getElementById("modalContent");
      const formModal = document.getElementById("formModal");
      const spotForm = document.getElementById("spotForm");
  
      // Load saved spots from localStorage (or empty array if none exist)
      let spots = JSON.parse(localStorage.getItem("spots")) || [];
  
      // Display all saved spots as cards on the main screen
      function renderSpots() {
        spotList.innerHTML = ""; // Clear list first
        spots.forEach((spot, index) => {
          const card = document.createElement("div");
          card.className = "spot-card";
          card.innerHTML = `
            <img src="${spot.image}" alt="${spot.name}" />
            <h3>${spot.name}</h3>
            <p>Rating: ${spot.rating}/5</p>
            <p>${spot.review}</p>
            <button onclick="event.stopPropagation(); deleteSpot(${index})" style="margin-top: 0.5rem; background: #d9534f;">Delete</button>
            `;
          card.onclick = () => showFullReview(index); // Show full review on click
          spotList.appendChild(card);
        });
      }
  
      // Show full information for a saved spot in a modal popup
      function showFullReview(index) {
        const spot = spots[index];
        modalContent.innerHTML = `
          <h2>${spot.name}</h2>
          <img src="${spot.image}" style="width:100%;height:auto;border-radius:8px;"/>
          <p><strong>Rating:</strong> ${spot.rating}/5</p>
          <p>${spot.review}</p>
          <button onclick="closeModal()">Close</button>
        `;
        spotModal.style.display = "flex";
      }
  
      // Hide the review modal
      function closeModal() {
        spotModal.style.display = "none";
      }
  
      // Open the form to add a new spot
      function openForm() {
        formModal.style.display = "flex";
      }
  
      // Hide the form modal
      function closeForm() {
        formModal.style.display = "none";
      }
  
      // Handle form submission for adding a new spot
      spotForm.addEventListener("submit", function(e) {
        e.preventDefault(); // Prevent default form action
  
        // Collect data from the form
        const name = document.getElementById("name").value.trim();
        const rating = document.getElementById("rating").value;
        const review = document.getElementById("review").value.trim();
        const imageInput = document.getElementById("image");
        const imageFile = imageInput.files[0];
  
        // Basic validation
        if (!name || !rating || !review || !imageFile) {
          alert("Please fill out all fields and upload an image.");
          return;
        }
  
        // Read image as base64 string to save in localStorage
        const reader = new FileReader();
        reader.onload = function(event) {
          const newSpot = {
            name,
            rating,
            review,
            image: event.target.result
          };
  
          spots.unshift(newSpot); // Add new spot to start of the array
          localStorage.setItem("spots", JSON.stringify(spots)); // Save to localStorage
          renderSpots(); // Update the UI
          closeForm(); // Close the form
          spotForm.reset(); // Clear the form fields
        };
        reader.readAsDataURL(imageFile); // Start reading the file
      });
  
      // Initially display any saved spots
      renderSpots();

        function deleteSpot(index) {
        if (confirm("Are you sure you want to delete this spot?")) {
            spots.splice(index, 1); // Remove the selected spot
            localStorage.setItem("spots", JSON.stringify(spots)); // Update localStorage
            renderSpots(); // Re-render the updated list
        }
        }
    </script>
  </body>
  </html> 